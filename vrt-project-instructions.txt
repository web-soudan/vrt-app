# VRTテストアプリケーション - セットアップと使用方法

## セットアップ手順

### 1. ファイルの解凍

ダウンロードしたZIPファイルを任意のディレクトリに解凍します。

### 2. 依存関係のインストール

ターミナル（コマンドプロンプト）を開き、以下のコマンドを実行します。

```bash
# クライアント側の依存関係をインストール
cd client
npm install

# サーバー側に移動
cd ../server
npm install

# Playwrightのブラウザをインストール
npx playwright install chromium
```

### 3. ディレクトリ構造の確認

以下のディレクトリがserver内に存在することを確認し、ない場合は作成します。

- `server/screenshots`
- `server/diffs`
- `server/uploads`

### 4. アプリケーションの起動

```bash
# サーバーの起動（server ディレクトリ内で）
npm start

# 別のターミナルウィンドウを開く
# クライアントの起動（client ディレクトリ内で）
cd ../client
npm start
```

ブラウザが自動的に開き、http://localhost:3000 にアクセスします。

## 使用方法

### 1. テスト設定

- **テストするURL**: スクリーンショットを取得したいウェブサイトのURLを入力します。
- **スクリーンショット前の待機時間**: ページが完全に読み込まれた後、スクリーンショットを撮影するまでの待機時間を秒単位で指定します。
- **差分検出のしきい値**: 差分と判定する閾値を0.0〜1.0の範囲で指定します。値が小さいほど敏感に差分を検出します。

### 2. スクリーンショットの取得

1. 「1回目スクリーンショット取得」ボタンをクリックして、基準となるスクリーンショットを撮影します。
2. 必要に応じてURLを変更するか、同じURLでも良い場合はそのままにします。
3. 「2回目スクリーンショット取得」ボタンをクリックして、比較用のスクリーンショットを撮影します。

### 3. 比較結果の確認

両方のスクリーンショットが取得されると、下部の「比較結果」セクションに差分が表示されます。

以下の3つの表示モードを切り替えることができます：

- **差分表示**: 変更部分が強調表示されます。「差分を強調表示」チェックボックスと「差分の色」で表示をカスタマイズできます。
- **横並び比較**: 2つのスクリーンショットが横に並んで表示されます。
- **スライダー比較**: スライダーを動かして、2つのスクリーンショットを重ねて比較できます。

### 4. クリア

「クリア」ボタンをクリックすると、取得したスクリーンショットと比較結果がリセットされます。

## トラブルシューティング

1. **サーバーが起動しない場合**
   - Node.jsが正しくインストールされているか確認してください（v14以上推奨）
   - server/node_modulesディレクトリを削除し、再度`npm install`を実行してみてください

2. **スクリーンショットが取得できない場合**
   - URLが正しく入力されているか確認してください
   - Playwrightのブラウザが正しくインストールされているか確認してください
   - サーバーのログでエラーメッセージを確認してください

3. **差分が正しく表示されない場合**
   - 差分検出のしきい値を調整してみてください
   - スクリーンショット前の待機時間を長くして、ページが完全に読み込まれるようにしてください